const voicesDropdown=document.querySelector("[name='voice']"),options=document.querySelectorAll("[type='range'], [name='text']"),stopButton=document.querySelector("#stop"),speakButton=document.querySelector("#speak");let voices=[];const msg=new SpeechSynthesisUtterance;function populateVoices(){voices=this.getVoices(),voicesDropdown.innerHTML=voices.map(function(voice){return`\n        <option value="${voice.name}">${voice.name} (${voice.lang})</option>\n      `}).join("")}function setVoice(){msg.voice=voices.find(function(voice){return voice.name===this.value},this),toggle()}function toggle(startOver=!0){speechSynthesis.cancel(),startOver&&speechSynthesis.speak(msg)}function setOption(){msg[this.name]=this.value,toggle()}msg.text=document.querySelector("[name='text']").value,speechSynthesis.addEventListener("voiceschanged",populateVoices),voicesDropdown.addEventListener("change",setVoice),options.forEach(function(option){option.addEventListener("change",setOption)}),speakButton.addEventListener("click",toggle),stopButton.addEventListener("click",function(){toggle(!1)});